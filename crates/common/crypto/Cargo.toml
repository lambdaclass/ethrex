[package]
name = "ethrex-crypto"
version.workspace = true
edition.workspace = true
authors.workspace = true
documentation.workspace = true

[lib]
path = "./lib.rs"

[dependencies]
# TODO(#1102): Move to Lambdaworks in the future
# NOTE: c-kzg removed - using kzg-rs (pure Rust) instead for pevm compatibility
# c-kzg 2.x conflicts with pevm which uses alloy 0.12.x -> c-kzg 1.x
kzg-rs.workspace = true
openvm-kzg = { git = "https://github.com/axiom-crypto/openvm-kzg.git", rev = "530a6ed413def5296b7e4967650ba4fc8fd92ea1", optional = true } # v1.4.1
thiserror.workspace = true

# tiny-keccak is always available (used as fallback or when no-asm-keccak is enabled)
tiny-keccak = { version = "2.0.2", features = ["keccak"] }

[features]
# no-asm-keccak is enabled by default because pevm brings in sha3-asm which
# defines the same KeccakF1600 symbol as our assembly implementation
default = ["no-asm-keccak"]
# c-kzg feature removed for pevm compatibility - using kzg-rs instead
openvm-kzg = ["dep:openvm-kzg"]

# risc0 feature disabled - needs c-kzg which conflicts with pevm
openvm = ["openvm-kzg"]

# Enable this feature to use pure Rust keccak instead of assembly
# Required when using pevm to avoid symbol conflicts with sha3-asm
no-asm-keccak = []

[lints]
workspace = true
