[package]
name = "ethrex-prover"
version = "0.1.0"
edition = "2024"

[build-dependencies]
risc0-build = { version = "2.1.2", optional = true }
risc0-zkvm = { version = "2.1.0", optional = true }
sp1-build = { version = "5.0.0", optional = true }
sp1-sdk = { version = "5.0.0", optional = true }

[dependencies]
ethrex-blockchain.workspace = true
ethrex-vm.workspace = true
ethrex-common.workspace = true
ethrex-l2.workspace = true
ethrex-l2-common.workspace = true

serde.workspace = true
serde_with.workspace = true
serde_json.workspace = true
bincode = "1.3.3"

tracing.workspace = true
tracing-subscriber.workspace = true

thiserror.workspace = true

# Runtimes
tokio.workspace = true

# SP1
sp1-sdk = { version = "5.0.0", optional = true }
sp1-recursion-gnark-ffi = { version = "5.0.0", optional = true }

# RISC0
risc0-zkvm = { version = "2.1.0", optional = true }
risc0-zkp = { version = "2.0.1", optional = true }

# CLI
clap.workspace = true

[lib]
name = "ethrex_prover_lib"
path = "src/lib.rs"

[[bin]]
name = "ethrex_prover"
path = "src/main.rs"

[features]
default = ["l2"]
l2 = []
risc0 = ["dep:risc0-zkvm", "dep:risc0-zkp"]
sp1 = ["dep:sp1-sdk", "dep:sp1-recursion-gnark-ffi"]
gpu = ["risc0-zkvm?/cuda", "sp1-sdk?/cuda"]
